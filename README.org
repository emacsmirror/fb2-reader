#+TITLE: FB2-reader
#+PROPERTY: LOGGING nil
[[https://melpa.org/#/fb2-reader][file:https://melpa.org/packages/fb2-reader-badge.svg]]

[[./images/rohanreads.gif]]

Major mode to read FictionBook2 documents.

[[./images/window.png]]

*Features:*
 
- read .fb2 and .fb2.zip files
- reach book formatting
- showing current title in header line
- internal links (select from keyboard, jumb back and forth)
- navigation (next/previous chapters, imenu support)
- restoring last read position
- displaying raw xml

*Coming soon:*

- book info screen
- integration with https://github.com/jumper047/librera-sync
- rendering book in org-mode

* TL;DR
  Add to your config and open any .fb2 or .fb2.zip document.
  #+begin_src emacs-lisp
    (use-package fb2-reader
      :mode (("\\.fb2\\(.zip\\|\\)$" . fb2-reader-mode))
      :custom
      ;; This mode renders book with fixed width, adjust to your preferences.
      (fb2-reader-page-width 120)
      (fb2-reader-image-max-width 400)
      (fb2-reader-image-max-height 400))
  #+end_src

* Installation

  Install =fb2-reader= from MELPA and add that string to your config:
   #+begin_src emacs-lisp
     (require 'fb2-reader)
     (add-to-list 'auto-mode-alist '("\\.fb2\\(.zip\\|\\)$" . fb2-reader-mode))
   #+end_src

   Also you can set it up with use-package:
   #+begin_src emacs-lisp
     (use-package fb2-reader
       :mode (("\\.fb2\\(.zip\\|\\)$" . fb2-reader-mode)))
   #+end_src

* Customization
  Every book rendered as buffer with certain width, so you may want to tune variables related to your monitor's size or reading preferences:
  - *fb2-reader-page-width* - width of rendered book
  - *fb2-reader-image-max-width* and *fb2-reader-image-max-height* - max. width and height of an images in book.
  
  You can view all available options with =M-x customize-group fb2-reader=.
  
* Usage
  Just open an .fb2 or .fb2.zip file.
  First opening will take a time - book will be rendered and saved to cache, so all next ones will be quick.
  Default bindings listed below:
  |----------+-----------------------------------------------|
  | Key      | Action                                        |
  |----------+-----------------------------------------------|
  | =[=, =]= | Jump to previous or next chapter              |
  |----------+-----------------------------------------------|
  | =p=, =n= | Jump to previous or next displayed link       |
  |----------+-----------------------------------------------|
  | =l=, =r= | History navigation (for now, actualy, it just |
  | =B=, =N= | jumps between last link target and location)  |
  |----------+-----------------------------------------------|
  | =g=      | Reload current book                           |
  |----------+-----------------------------------------------|
  | =v=      | View current book as xml                      |

* Aknowledgements
Heavily inspired by @spline1986's [[https://github.com/spline1986/fb2-mode][fb2-mode]]
